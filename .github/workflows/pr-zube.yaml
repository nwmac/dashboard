name: zube-integration
on:
  pull_request:
    types: [ opened, reopened, edited, closed ]

jobs:
  rancher_zube:
    runs-on: ubuntu-latest
    steps:
    - name: fetch-scripts
      run: |
        mkdir -p .github/workflows/scripts
        pushd .github/workflows/scripts
        wget https://raw.githubusercontent.com/rancher/dashboard/master/.github/workflows/scripts/pr.js
        wget https://raw.githubusercontent.com/rancher/dashboard/master/.github/workflows/scripts/request.js
        popd
    - name: run-script
      run: node .github/workflows/scripts/pr.js "${{ secrets.GITHUB_TOKEN }}"
